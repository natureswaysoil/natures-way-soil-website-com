(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{7250:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return t(4490)}])},8215:function(e,i,t){"use strict";t.d(i,{Eh:function(){return o},cl:function(){return u},jX:function(){return l},wv:function(){return a}});var n=t(7216);function a(e){return n.find(i=>i.slug===e&&i.active)}let r="nws_cart",s=()=>!!window.localStorage;function o(){if(!s())return[];try{return JSON.parse(localStorage.getItem(r)||"[]")}catch(e){return[]}}function c(e){s()&&localStorage.setItem(r,JSON.stringify(e))}function l(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=o(),n=t.findIndex(i=>i.id===e.id);n>=0?t[n].qty+=i:t.push({...e,qty:Math.max(1,i)});let a=t.filter(e=>e.qty>0);return c(a),a}function u(e){let i=o().filter(i=>i.id!==e);return c(i),i}},4490:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return g}});var n=t(5893),a=t(7294),r=t(6664),s=t(4465),o=t(5675),c=t.n(o);function l(){let e=(0,r.useStripe)(),i=(0,r.useElements)(),[t,s]=(0,a.useState)(null),[o,c]=(0,a.useState)(!1),l=async t=>{if(t.preventDefault(),!e||!i)return;c(!0);let{error:n}=await e.confirmPayment({elements:i,confirmParams:{return_url:window.location.origin+"/checkout?status=success"}});n&&s(n.message||"An unexpected error occurred."),c(!1)};return(0,n.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,n.jsx)(r.PaymentElement,{}),(0,n.jsx)("button",{type:"submit",disabled:!e||o,className:"px-4 py-2 bg-green-600 text-white rounded disabled:opacity-50",children:o?"Processing…":"Pay now"}),t&&(0,n.jsx)("div",{className:"text-red-500",children:t})]})}var u=t(8215),d=t(3454);let p=(0,s.J)(d.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY||"");function g(){let[e,i]=(0,a.useState)(""),[t,s]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("slug")||"",n=e.get("qty")||"1";s((0,u.wv)(t)||null),t&&fetch("/api/stripe/create-intent?slug=".concat(t,"&qty=").concat(n)).then(e=>e.json()).then(e=>i(e.clientSecret))},[]),t)?(0,n.jsxs)("div",{className:"p-8 max-w-md mx-auto",children:[(0,n.jsxs)("h1",{className:"text-xl font-semibold mb-4",children:["Checkout — ",t.title]}),(0,n.jsx)(c(),{src:t.images[0]||"/placeholder-product.png",alt:t.title,width:400,height:400,className:"mb-4"}),e&&(0,n.jsx)(r.Elements,{stripe:p,options:{clientSecret:e},children:(0,n.jsx)(l,{})})]}):(0,n.jsx)("p",{className:"p-4",children:"Product not found."})}},7216:function(e){"use strict";e.exports=JSON.parse('[{"id":1,"slug":"nws-dog-urine-32oz","title":"Nature\'s Way Soil Dog Urine Neutralizer & Lawn Revitalizer 32oz","description":"Enzyme spray repairs yellow spots and revives lawns","price":29.98,"active":true,"sku":"NWS-DOG-URINE-32OZ","images":["/nws/dog_urine.png","/nws/dog_urine_2.png"],"variations":[{"name":"32oz","price":29.98}]},{"id":2,"slug":"nws-liq-kelp-32oz","title":"Nature\'s Way Soil Liquid Kelp Fertilizer 32oz","description":"Cold processed seaweed extract boosts growth","price":24.99,"active":true,"sku":"NWS-LIQ-KELP-32OZ","images":["/nws/liquid_kelp.png"],"variations":[{"name":"16oz","price":16.99},{"name":"32oz","price":24.99},{"name":"64oz","price":44.99}]},{"id":3,"slug":"nws-tomato-1gal","title":"Nature\'s Way Soil Organic Tomato Liquid Fertilizer 1gal","description":"Vitamin B1 and aloe for strong roots and transplants","price":29.99,"active":true,"sku":"NWS-TOMATO-1GAL","images":["/nws/organic_tomato.png"],"variations":[{"name":"32oz","price":20.99},{"name":"1gal","price":29.99}]},{"id":4,"slug":"nws-garden-house-1gal","title":"Nature\'s Way Soil Organic Liquid Fertilizer for Garden and House Plants 1gal","description":"USDA biobased blend with B vitamins and aloe","price":20.26,"active":true,"sku":"NWS-GARDEN-HOUSE-1GAL","images":["/nws/garden_house.png"],"variations":[{"name":"32oz","price":14.99},{"name":"1gal","price":20.26}]},{"id":5,"slug":"nws-liq-bone-1gal","title":"Nature\'s Way Soil Liquid Bone Meal Fertilizer 1gal","description":"Fast absorbing phosphorus and calcium for roots","price":39.99,"active":true,"sku":"NWS-LIQ-BONE-1GAL","images":["/nws/liquid_bone_meal.png"],"variations":[{"name":"32oz","price":24.99},{"name":"1gal","price":39.99}]},{"id":6,"slug":"nws-hydro-32oz","title":"Nature\'s Way Soil Organic Hydroponic Fertilizer Concentrate 32oz","description":"Organic concentrate makes 512 gallons of solution","price":25.98,"active":true,"sku":"NWS-HYDRO-32OZ","images":["/nws/hydroponic.png"],"variations":[{"name":"32oz","price":25.98},{"name":"64oz","price":44.99}]},{"id":7,"slug":"nws-living-compost","title":"Nature\'s Way Soil Enhanced Living Compost","description":"Duckweed extract worm castings biochar and compost","price":29.98,"active":true,"sku":"NWS-LIVING-COMPOST","images":["/nws/living_compost.png"],"variations":[{"name":"1cuft","price":29.98}]},{"id":8,"slug":"nws-hay-pasture-25gal","title":"Nature\'s Way Soil Hay Pasture & Lawn Fertilizer 2.5gal","description":"Pet safe microbial nitrogen blend for turf and forage","price":99.99,"active":true,"sku":"NWS-HAY-PASTURE-25GAL","images":["/nws/hay_pasture.png"],"variations":[{"name":"1gal","price":66.99},{"name":"2.5gal","price":99.99}]},{"id":9,"slug":"nws-seaweed-humic-32oz","title":"Nature\'s Way Soil Seaweed & Humic Acid Lawn Treatment 32oz","description":"Kelp and humic acid blend revitalizes soil","price":32.29,"active":true,"sku":"NWS-SEAWEED-HUMIC-32OZ","images":["/nws/seaweed_humic.png"],"variations":[{"name":"32oz","price":32.29},{"name":"1gal","price":64.99}]},{"id":10,"slug":"nws-humic-fulvic-kelp-25gal","title":"Nature\'s Way Soil Liquid Humic & Fulvic Acid with Organic Kelp 2.5gal","description":"Humic and fulvic acids with kelp stimulate growth","price":69.99,"active":true,"sku":"NWS-HUMIC-FULVIC-KELP-25GAL","images":["/nws/humic_fulvic.png"],"variations":[{"name":"32oz","price":24.99},{"name":"1gal","price":39.99},{"name":"2.5gal","price":69.99}]}]')}},function(e){e.O(0,[675,564,888,774,179],function(){return e(e.s=7250)}),_N_E=e.O()}]);